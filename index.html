<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Регистрация</title>
    <style>
              :root {
                  --primary-color: #2196F3;
                  --error-color: #f44336;
                  --success-color: #4CAF50;
                  --shadow-color: rgba(0, 0, 0, 0.1);
              }

              body {
                  font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
                  background: var(--tg-theme-bg-color, #f5f5f5);
                  color: var(--tg-theme-text-color, #2c3e50);
                  margin: 0;
                  padding: 20px;
                  min-height: 100vh;
                  display: flex;
                  align-items: center;
                  justify-content: center;
              }

              .registration-form {
                  background: var(--tg-theme-secondary-bg-color, #ffffff);
                  max-width: 400px;
                  width: 100%;
                  padding: 30px;
                  border-radius: 16px;
                  box-shadow: 0 8px 24px var(--shadow-color);
                  animation: fadeIn 0.5s ease-out;
              }

              @keyframes fadeIn {
                  from {
                      opacity: 0;
                      transform: translateY(20px);
                  }
                  to {
                      opacity: 1;
                      transform: translateY(0);
                  }
              }

              .form-title {
                  text-align: center;
                  margin-bottom: 30px;
                  font-size: 28px;
                  font-weight: 600;
                  color: var(--tg-theme-text-color, #1a1a1a);
              }

              .form-group {
                  margin-bottom: 24px;
                  position: relative;
              }

              label {
                  display: block;
                  margin-bottom: 8px;
                  font-weight: 500;
                  font-size: 14px;
                  color: var(--tg-theme-hint-color, #666666);
                  transition: color 0.3s ease;
              }

              input {
                  width: 100%;
                  padding: 12px 16px;
                  border: 2px solid var(--tg-theme-hint-color, #e0e0e0);
                  border-radius: 12px;
                  font-size: 16px;
                  background-color: var(--tg-theme-secondary-bg-color, #ffffff);
                  color: var(--tg-theme-text-color, #1a1a1a);
                  box-sizing: border-box;
                  transition: all 0.3s ease;
              }

              input:focus {
                  outline: none;
                  border-color: var(--tg-theme-button-color, var(--primary-color));
                  box-shadow: 0 0 0 4px rgba(33, 150, 243, 0.1);
              }

              .submit-button {
                  width: 100%;
                  padding: 14px;
                  background: var(--tg-theme-button-color, var(--primary-color));
                  color: var(--tg-theme-button-text-color, #ffffff);
                  border: none;
                  border-radius: 12px;
                  font-size: 16px;
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s ease;
                  text-transform: uppercase;
                  letter-spacing: 0.5px;
              }

              .submit-button:hover {
                  transform: translateY(-2px);
                  box-shadow: 0 6px 12px rgba(33, 150, 243, 0.2);
      }

      .submit-button:active {
          transform: translateY(0);
          box-shadow: 0 3px 6px rgba(33, 150, 243, 0.1);
      }

      /* Анимация для полей ввода */
      .form-group input:focus + label {
          color: var(--primary-color);
      }

      /* Стили для сообщений об ошибках */
      .error-message {
          color: var(--error-color);
          font-size: 12px;
          margin-top: 5px;
          display: none;
          padding-left: 16px;
          animation: slideIn 0.3s ease-out;
      }

      @keyframes slideIn {
          from {
              opacity: 0;
              transform: translateY(-10px);
          }
          to {
              opacity: 1;
              transform: translateY(0);
          }
      }

      /* Стили для успешной валидации */
      input.valid {
          border-color: var(--success-color);
      }

      /* Адаптивность для мобильных устройств */
      @media (max-width: 480px) {
          .registration-form {
              padding: 20px;
              margin: 10px;
              border-radius: 12px;
          }▌
    </style>
  </head>
  <body>
    <div class="registration-form">
      <h1 class="form-title">Регистрация</h1>
      <form id="registrationForm">
        <div class="form-group">
          <label for="firstName">Имя</label>
          <input
            type="text"
            id="firstName"
            name="firstName"
            required
            placeholder="Введите ваше имя"
          />
        </div>

        <div class="form-group">
          <label for="lastName">Фамилия</label>
          <input
            type="text"
            id="lastName"
            name="lastName"
            required
            placeholder="Введите вашу фамилию"
          />
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <input
            type="email"
            id="email"
            name="email"
            required
            placeholder="Введите ваш email"
          />
        </div>

        <button type="submit" class="submit-button">Зарегистрироваться</button>
      </form>
    </div>
    <script>
      document
        .getElementById("registrationForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          const firstName = document.getElementById("firstName").value;
          const lastName = document.getElementById("lastName").value;
          const email = document.getElementById("email").value;

          // Проверка данных
          if (!firstName || !lastName || !email) {
            alert("Пожалуйста, заполните все поля");
            return;
          }

          // Проверка формата email
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailRegex.test(email)) {
            alert("Пожалуйста, введите корректный email адрес");
            return;
          }

          // Создаем объект с данными формы
          const formData = {
            firstName: firstName,
            lastName: lastName,
            email: email,
          };

          // Формируем текст сообщения для отправки в Telegram
          const message = `
Новая регистрация:
Имя: ${firstName}
Фамилия: ${lastName}
Email: ${email}
    `;

          try {
            // Отправляем данные в Telegram бот
            const response = await fetch(
              `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`,
              {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({
                  chat_id: CHAT_ID,
                  text: message,
                  parse_mode: "HTML",
                }),
              }
            );

            if (!response.ok) {
              throw new Error("Ошибка при отправке данных в Telegram");
            }

            // Если используется Telegram Web App
            if (window.Telegram && window.Telegram.WebApp) {
              window.Telegram.WebApp.sendData(JSON.stringify(formData));
            }

            alert("Регистрация успешно завершена!");
            document.getElementById("registrationForm").reset();
          } catch (error) {
            console.error("Ошибка:", error);
            alert("Произошла ошибка при отправке данных");
          }
        });

      // Инициализация Telegram Web App
      if (window.Telegram && window.Telegram.WebApp) {
        window.Telegram.WebApp.ready();
        window.Telegram.WebApp.expand();
      }
    </script>
  </body>
</html>
